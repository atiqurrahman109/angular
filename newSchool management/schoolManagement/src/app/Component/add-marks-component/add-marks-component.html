<div class="container mt-4">
  <h2 class="mb-3">üìù Add / View Marks</h2>

  <div *ngIf="errorMsg" class="alert alert-danger">{{ errorMsg }}</div>
  <div *ngIf="successMsg" class="alert alert-success">{{ successMsg }}</div>

  <form [formGroup]="marksForm" (ngSubmit)="submit()" class="row g-3">

    <!-- Student ID -->
    <div class="col-md-3" formGroupName="student">
      <label class="form-label">Student ID *</label>
      <input type="number" formControlName="id" class="form-control" placeholder="Enter Student ID" />
    </div>

    <!-- Exam ID -->
    <div class="col-md-3" formGroupName="exam">
      <label class="form-label">Exam ID *</label>
      <input type="number" formControlName="id" class="form-control" placeholder="Enter Exam ID" />
    </div>

    <!-- Marks Inputs -->
    <div class="col-md-2">
      <label class="form-label">Bangla *</label>
      <input type="number" formControlName="marksObtainedBangla" class="form-control" />
    </div>
    <div class="col-md-2">
      <label class="form-label">English *</label>
      <input type="number" formControlName="marksObtainedEnglish" class="form-control" />
    </div>
    <div class="col-md-2">
      <label class="form-label">Math *</label>
      <input type="number" formControlName="marksObtainedMath" class="form-control" />
    </div>
    <div class="col-md-2">
      <label class="form-label">Science *</label>
      <input type="number" formControlName="marksObtainedScience" class="form-control" />
    </div>
    <div class="col-md-2">
      <label class="form-label">Islam *</label>
      <input type="number" formControlName="marksObtainedIslam" class="form-control" />
    </div>
    <div class="col-md-2">
      <label class="form-label">Sports *</label>
      <input type="number" formControlName="marksObtainedSports" class="form-control" />
    </div>

    <!-- Total -->
    <div class="col-md-3">
      <label class="form-label">Total Marks</label>
      <input type="number" formControlName="totalMarks" class="form-control" readonly />
    </div>

    <div class="col-md-3 d-flex align-items-end">
      <button type="submit" class="btn btn-success w-100" [disabled]="marksForm.invalid">Save Marks</button>
    </div>
  </form>

  <hr />

  <!-- Marks List -->
  <div *ngIf="loading">Loading marks...</div>
  <div *ngIf="!loading && marksList.length === 0" class="text-muted">No marks found.</div>

  <div *ngIf="marksList.length > 0" class="table-responsive mt-3">
    <table class="table table-bordered table-striped">
      <thead class="table-dark">
        <tr>
          <th>ID</th>
          <th>Student</th>
          <!-- <th>Exam</th> -->
          <th>Bangla</th>
          <th>English</th>
          <th>Math</th>
          <th>Science</th>
          <th>Islam</th>
          <th>Sports</th>
          <th>Total</th>
          <th>GPA</th>
          <th>Grade</th>
          <th>Status</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let m of marksList">
          <td>{{ m.id }}</td>
          <td>{{ m.studentDTO?.firstName || 'N/A' }}</td>
          <!-- <td>{{ m.examDTO?.examName }}</td> -->
          <td>{{ m.marksObtainedBangla }}</td>
          <td>{{ m.marksObtainedEnglish }}</td>
          <td>{{ m.marksObtainedMath }}</td>
          <td>{{ m.marksObtainedScience }}</td>
          <td>{{ m.marksObtainedIslam }}</td>
          <td>{{ m.marksObtainedSports }}</td>
          <td>{{ m.totalMarks }}</td>
          <td>{{ m.gpa }}</td>
          <td>{{ m.grade }}</td>
          <td>{{ m.status }}</td>
          <td><button class="btn btn-danger btn-sm" (click)="delete(m.id)">Delete</button></td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
